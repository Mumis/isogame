parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eHzx":[function(require,module,exports) {

},{}],"Wjc8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityChanged=void 0;var t=function(){return function(t){this.entity=t}}();exports.EntityChanged=t;
},{}],"pmwY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector3=void 0;var t=function(){function t(t,i,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=i,this.z=r}return t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y,this.z+i.z)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y,this.z-i.z)},t.prototype.multiplyScalar=function(i){return new t(this.x*i,this.y*i,this.z*i)},t.prototype.divideScalar=function(i){if(0===i)throw new Error("Division by zero");return new t(this.x/i,this.y/i,this.z/i)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.normalize=function(){var i=this.length();return 0===i?new t(0,0,0):this.divideScalar(i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.cross=function(i){return new t(this.y*i.z-this.z*i.y,this.z*i.x-this.x*i.z,this.x*i.y-this.y*i.x)},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2))},t.prototype.distanceSquared=function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2)},t.prototype.lerp=function(t,i){return this.add(t.subtract(this).multiplyScalar(i))},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},t.prototype.toString=function(){return"Vector3("+this.x+", "+this.y+", "+this.z+")"},t.zero=function(){return new t(0,0,0)},t.unitX=function(){return new t(1,0,0)},t.unitY=function(){return new t(0,1,0)},t.unitZ=function(){return new t(0,0,1)},t}();exports.Vector3=t;
},{}],"FXSM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Entity=exports.EntityDirection=exports.EntityState=void 0;var t,e,i=require("../Event/EntityChanged"),n=require("../Game/Game"),o=require("../Util/Vector3");!function(t){t[t.IDLING=0]="IDLING",t[t.WALKING=1]="WALKING",t[t.ATTACKING=2]="ATTACKING",t[t.DYING=3]="DYING",t[t.AIRBORNE=4]="AIRBORNE"}(t=exports.EntityState||(exports.EntityState={})),function(t){t[t.N=0]="N",t[t.E=1]="E",t[t.S=2]="S",t[t.W=3]="W"}(e=exports.EntityDirection||(exports.EntityDirection={}));var s=function(){function s(){this.components=[],this.step=0,this.timeElapsed=0,this.position=new o.Vector3(0,0,0),this.zIndex=0,this.direction=e.S,this.state=t.IDLING,this.frameHeight=16,this.frameWidth=16,this.width=16,this.height=16,this.image=new Image,this.spirteSheetMap=[],this.castShadow=!1}return s.prototype.getComponent=function(t){for(var e=0,i=this.components;e<i.length;e++){var n=i[e];if(n instanceof t)return n}throw new Error("Failed to get component type "+t+". Please run hasComponent first!")},s.prototype.removeComponent=function(t){var e=this.components.indexOf(t);e>=0&&(this.components.splice(e,1),n.Game.events.emit(new i.EntityChanged(this)))},s.prototype.addComponent=function(t){this.components.push(t),n.Game.events.emit(new i.EntityChanged(this))},s.prototype.addComponents=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o=0,s=t;o<s.length;o++){var r=s[o];this.addComponent(r)}n.Game.events.emit(new i.EntityChanged(this))},s.prototype.hasComponent=function(t){for(var e=0,i=this.components;e<i.length;e++){if(i[e]instanceof t)return!0}return!1},s.prototype.hasComponents=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];if(!this.hasComponent(n))return!1}return!0},s.prototype.setState=function(t){this.state=t,this.state!==t&&(this.step=0,this.timeElapsed=0)},s.prototype.draw=function(t,e,i){var o,s,r,h,a=this,p=n.Game.worldPosToScreenPos(this.position),d=this.width,m=this.height;t.imageSmoothingEnabled=!1;var l=this.spirteSheetMap.find(function(t){return t.state===a.state&&t.direction===a.direction}),u=null!==(o=null==l?void 0:l.xIndex)&&void 0!==o?o:0,c=null!==(s=null==l?void 0:l.yIndex)&&void 0!==s?s:0,f=null!==(r=null==l?void 0:l.steps)&&void 0!==r?r:0,v=null!==(h=null==l?void 0:l.speed)&&void 0!==h?h:0,g=(u+this.step)*this.frameWidth,y=c*this.frameHeight;t.save(),t.globalAlpha=i,t.drawImage(this.image,g,y,this.frameWidth,this.frameHeight,p.x-this.width/2,p.y-this.height/2,d,m),t.restore(),this.timeElapsed+=e;var E=v/f;this.timeElapsed>=E&&(this.step++,this.timeElapsed=0),this.step>=f&&(this.step=u)},s}();exports.Entity=s;
},{"../Event/EntityChanged":"Wjc8","../Game/Game":"juVC","../Util/Vector3":"pmwY"}],"c4tB":[function(require,module,exports) {
module.exports="/slime-blue.b7f71d7c.png";
},{}],"jFDH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=void 0;var e=function(){return function(){}}();exports.Component=e;
},{}],"dly9":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Physical=void 0;var o=require("../Util/Vector3"),e=require("./Component"),r=function(e){function r(t,r,n){void 0===t&&(t=new o.Vector3(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=1);var i=e.call(this)||this;return i.velocity=t,i.acceleration=r,i.mass=n,i}return t(r,e),r}(e.Component);exports.Physical=r;
},{"../Util/Vector3":"pmwY","./Component":"jFDH"}],"aAwm":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Movable=void 0;var o=require("../Util/Vector3"),e=require("./Component"),r=function(e){function r(t,r,n){void 0===t&&(t=new o.Vector3(0,0,0)),void 0===r&&(r=!1);var i=e.call(this)||this;return i.velocity=t,i.patrolling=r,i.patrollingSettings=n,i.patrollingTo=null,i}return t(r,e),r}(e.Component);exports.Movable=r;
},{"../Util/Vector3":"pmwY","./Component":"jFDH"}],"QPvb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Stats=void 0;var e=require("./Component"),r=function(e){function r(t,r,n,o){void 0===t&&(t={max:100,current:150,regen:1}),void 0===r&&(r={max:100,current:100,regen:1}),void 0===n&&(n={max:100,current:1e6,regen:1}),void 0===o&&(o={max:100,current:100,regen:1});var i=e.call(this)||this;return i.health=t,i.mana=r,i.stamina=n,i.speed=o,i}return t(r,e),r}(e.Component);exports.Stats=r;
},{"./Component":"jFDH"}],"ail1":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Collidable=exports.SphereHitbox=exports.CubeHitbox=void 0;var i=require("../Util/Vector3"),n=require("./Component"),o=function(){function t(t,i,n,o,e,r,a){void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=0),this.attached=t,this.width=i,this.depth=n,this.height=o,this.offsetX=e,this.offsetY=r,this.offsetZ=a}return t.prototype.getBoundingBox=function(){return{minX:this.attached.position.x+this.offsetX-this.width/2,maxX:this.attached.position.x+this.offsetX+this.width/2,minY:this.attached.position.y+this.offsetY-this.height,maxY:this.attached.position.y+this.offsetY,minZ:this.attached.position.z+this.offsetZ-this.depth/2,maxZ:this.attached.position.z+this.offsetZ+this.depth/2}},t.prototype.getCorners=function(){var t=this.getBoundingBox(),n=t.minX,o=t.maxX,e=t.minY,r=t.maxY,a=t.minZ,s=t.maxZ;return[new i.Vector3(n,e,a),new i.Vector3(o,e,a),new i.Vector3(o,e,s),new i.Vector3(n,e,s),new i.Vector3(n,r,a),new i.Vector3(o,r,a),new i.Vector3(o,r,s),new i.Vector3(n,r,s)]},t.prototype.intersectAABB=function(t){var i=this.getBoundingBox(),n=t.getBoundingBox(),o=Math.max(i.minX,n.minX),e=Math.min(i.maxX,n.maxX),r=Math.max(i.minY,n.minY),a=Math.min(i.maxY,n.maxY),s=Math.max(i.minZ,n.minZ),h=Math.min(i.maxZ,n.maxZ);return o<e&&r<a&&s<h?{minX:o,maxX:e,minY:r,maxY:a,minZ:s,maxZ:h}:null},t.prototype.overlapAABB=function(t){var n=this.getBoundingBox(),o=t.getBoundingBox(),e=Math.min(n.maxX-o.minX,o.maxX-n.minX),r=Math.min(n.maxY-o.minY,o.maxY-n.minY),a=Math.min(n.maxZ-o.minZ,o.maxZ-o.minZ);return new i.Vector3(e,r,a)},t}();exports.CubeHitbox=o;var e=function(){return function(t,i){this.radius=t}}();exports.SphereHitbox=e;var r=function(i){function n(t){var n=i.call(this)||this;return n.box=t,n}return t(n,i),n}(n.Component);exports.Collidable=r;
},{"../Util/Vector3":"pmwY","./Component":"jFDH"}],"ilFe":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Drawable=void 0;var e=require("./Component"),o=function(e){function o(t){void 0===t&&(t=!1);var o=e.call(this)||this;return o.fadeIn=t,o.opacity=1,o.fadeInElapsed=0,o.fadeOut=!1,o.fadeOutElapsed=0,o.fadeDuration=.1,t&&(o.opacity=0),o}return t(o,e),o}(e.Component);exports.Drawable=o;
},{"./Component":"jFDH"}],"RNth":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var n=require("./Entity"),i=e(require("./Enemies/Slimes/slime-blue.png")),r=require("../Components/Physical"),o=require("../Components/Movable"),s=require("../Components/Stats"),a=require("../Components/Collidable"),d=require("../Components/Drawable"),p=require("../Util/Vector3"),c=function(e){function c(){var t=e.call(this)||this;return t.frameHeight=32,t.frameWidth=32,t.width=32,t.height=32,t.position=new p.Vector3(3,3,3),t.castShadow=!0,t.addComponents(new d.Drawable,new s.Stats,new r.Physical,new a.Collidable(new a.CubeHitbox(t,.33,.33,.5,0,0,0)),new o.Movable),t.image.src=i.default,t.spirteSheetMap=[{state:n.EntityState.WALKING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.IDLING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:1}],t}return t(c,e),c}(n.Entity);exports.Player=c;
},{"./Entity":"FXSM","./Enemies/Slimes/slime-blue.png":"c4tB","../Components/Physical":"dly9","../Components/Movable":"aAwm","../Components/Stats":"QPvb","../Components/Collidable":"ail1","../Components/Drawable":"ilFe","../Util/Vector3":"pmwY"}],"FOzE":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Slime=void 0;var n=require("../../Entity"),i=e(require("./slime-blue.png")),r=require("../../../Components/Physical"),o=require("../../../Components/Movable"),s=require("../../../Components/Stats"),a=require("../../../Components/Collidable"),d=require("../../../Util/Vector3"),p=require("../../../Components/Drawable"),c=function(e){function c(t){void 0===t&&(t=new d.Vector3(3,3,3));var c=e.call(this)||this;return c.position=t,c.frameHeight=32,c.frameWidth=32,c.width=32,c.height=32,c.castShadow=!0,c.addComponents(new p.Drawable,new s.Stats,new r.Physical,new a.Collidable(new a.CubeHitbox(c,.33,.33,.5,0,0,0)),new o.Movable),c.image.src=i.default,c.spirteSheetMap=[{state:n.EntityState.WALKING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.IDLING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:1}],c}return t(c,e),c}(n.Entity);exports.Slime=c;
},{"../../Entity":"FXSM","./slime-blue.png":"c4tB","../../../Components/Physical":"dly9","../../../Components/Movable":"aAwm","../../../Components/Stats":"QPvb","../../../Components/Collidable":"ail1","../../../Util/Vector3":"pmwY","../../../Components/Drawable":"ilFe"}],"wPL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityAdded=void 0;var t=function(){return function(t){this.entity=t}}();exports.EntityAdded=t;
},{}],"SbuM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityRemoved=void 0;var e=function(){return function(e){this.entity=e}}();exports.EntityRemoved=e;
},{}],"d1VX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventBus=void 0;var t=function(){function t(){this.events=new Map}return t.prototype.register=function(t,e){var s=this.events.get(t);s?s.push(e):this.events.set(t,[e])},t.prototype.emit=function(t){var e=this.events.get(t.constructor);if(e)for(var s=0,n=e;s<n.length;s++){(0,n[s])(t)}},t}();exports.EventBus=t;
},{}],"nSZu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.System=void 0;var t=function(){function t(){this.filteredEntities=[]}return t.prototype.addEntity=function(t){this.filteredEntities.push(t)},t.prototype.removeEntity=function(t){var e=this.filteredEntities.indexOf(t);this.filteredEntities.splice(e,1)},t.prototype.hasEntity=function(t){return this.filteredEntities.includes(t)},t.prototype.appliesTo=function(t){return!1},t.prototype.initialize=function(t){},t.prototype.filteredEntitiesUpdated=function(t){},t.prototype.update=function(t,e){throw new Error("Not implemented")},t}();exports.System=t;
},{}],"XcbI":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraSystem=void 0;var o=require("../Entities/Player"),e=require("./System"),r=function(e){function r(){var t=e.call(this)||this;return t.targetPosition=null,t}return t(r,e),r.prototype.appliesTo=function(t){return t instanceof o.Player},r.prototype.update=function(t,o){for(var e=0,r=this.filteredEntities;e<r.length;e++){var i=r[e];if(!this.targetPosition)return o.cameraPosition=i.position,void(this.targetPosition=o.cameraPosition);this.targetPosition=i.position,o.cameraPosition=i.position}},r}(e.System);function i(t,o,e){return t+(o-t)*e}exports.CameraSystem=r;
},{"../Entities/Player":"RNth","./System":"nSZu"}],"Jhdx":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function s(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.MovementSystem=void 0;var e=require("../Components/Movable"),n=require("../Components/Physical"),s=require("../Components/Stats"),i=require("../Entities/Player"),o=require("../Game/Game"),r=require("../Util/Vector3"),a=require("./System"),p=function(a){function p(){var t=a.call(this)||this;return t.inputs=new Set,window.addEventListener("keydown",t.onKeyDown.bind(t)),window.addEventListener("keyup",t.onKeyUp.bind(t)),t}return t(p,a),p.prototype.onKeyDown=function(t){switch(t.code){case"KeyW":this.inputs.add("up");break;case"KeyS":this.inputs.add("down");break;case"KeyA":this.inputs.add("left");break;case"KeyD":this.inputs.add("right");break;case"ShiftLeft":this.inputs.add("sprint");break;case"Space":this.inputs.add("jump")}},p.prototype.onKeyUp=function(t){switch(t.code){case"KeyW":this.inputs.delete("up");break;case"KeyS":this.inputs.delete("down");break;case"KeyA":this.inputs.delete("left");break;case"KeyD":this.inputs.delete("right");break;case"ShiftLeft":this.inputs.delete("sprint");break;case"Space":this.inputs.delete("jump")}},p.prototype.appliesTo=function(t){return t instanceof i.Player&&t.hasComponent(e.Movable)&&t.hasComponent(n.Physical)},p.prototype.update=function(t,i){for(var a=0,p=this.filteredEntities;a<p.length;a++){var u=p[a],h=u.getComponent(e.Movable),c=u.getComponent(n.Physical),d=u.hasComponent(s.Stats)?u.getComponent(s.Stats):null,y=d?d.speed.current:1,l=0,f=0,m=0,v=1;this.inputs.has("up")&&(m+=1,f-=1),this.inputs.has("down")&&(m-=1,f+=1),this.inputs.has("left")&&(f-=1,m-=1),this.inputs.has("right")&&(f+=1,m+=1),this.inputs.has("jump")&&0===c.velocity.y&&(l+=1),(this.inputs.has("up")||this.inputs.has("down")||this.inputs.has("left")||this.inputs.has("right"))&&this.inputs.has("sprint")&&d&&(null==d?void 0:d.stamina.current)>0&&(v=2.2,d.stamina.current-=1),h.velocity=new r.Vector3(f/o.Game.TILE_SIZE_WIDTH*y*v,0,m/o.Game.TILE_SIZE_WIDTH*y*v),c.velocity=c.velocity.add(new r.Vector3(0,16*l,0))}},p}(a.System);exports.MovementSystem=p;
},{"../Components/Movable":"aAwm","../Components/Physical":"dly9","../Components/Stats":"QPvb","../Entities/Player":"RNth","../Game/Game":"juVC","../Util/Vector3":"pmwY","./System":"nSZu"}],"Kog2":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}(),e=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var a=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],i=0,f=o.length;i<f;i++,r++)a[r]=o[i];return a};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawSystem=void 0;var n=require("../Components/Drawable"),a=require("../Game/Game"),r=require("./System"),o=function(r){function o(){var t=r.call(this)||this;return t.bufferCanvas=document.createElement("canvas"),t.bufferCtx=t.bufferCanvas.getContext("2d"),t}return t(o,r),o.prototype.appliesTo=function(t){return t.hasComponent(n.Drawable)},o.prototype.update=function(t,r){this.bufferCanvas.height=r.ctx.canvas.clientHeight,this.bufferCanvas.width=r.ctx.canvas.clientWidth,this.bufferCtx.imageSmoothingEnabled=!1;var o=a.Game.worldPosToScreenPos(r.cameraPosition),s=o.x-this.bufferCanvas.width/2,u=o.y-this.bufferCanvas.height/2;this.bufferCtx.transform(1,0,0,1,-s,-u);for(var c=0,p=e(this.filteredEntities).sort(function(t,e){var n=t.position,a=e.position;return t.zIndex!==e.zIndex?t.zIndex-e.zIndex:a.z!==n.z?a.z-n.z:n.y!==a.y?n.y-a.y:n.x-a.x});c<p.length;c++){var d=p[c],h=d.getComponent(n.Drawable);h.fadeIn&&i(h,t),h.fadeOut&&f(h,t),h.opacity<=0&&d.removeComponent(h),d.draw(this.bufferCtx,t,h.opacity)}r.ctx.clearRect(0,0,r.ctx.canvas.clientWidth,r.ctx.canvas.clientHeight),r.ctx.drawImage(this.bufferCanvas,0,0)},o}(r.System);function i(t,e){t.fadeInElapsed+=e,t.opacity=u(t.fadeInElapsed,0,1,t.fadeDuration),t.opacity>=1&&(t.opacity=1,t.fadeInElapsed=t.fadeDuration,t.fadeIn=!1)}function f(t,e){t.fadeOutElapsed+=e,t.opacity=1-u(t.fadeOutElapsed,0,1,t.fadeDuration),t.opacity<=0&&(t.opacity=0,t.fadeOutElapsed=t.fadeDuration,t.fadeOut=!1)}function s(t,e,n,a){return n*t/a+e}function u(t,e,n,a){return n*(t/=a)*t+e}function c(t,e,n,a){return-n*(t/=a)*(t-2)+e}exports.DrawSystem=o;
},{"../Components/Drawable":"ilFe","../Game/Game":"juVC","./System":"nSZu"}],"IPEb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.StateSystem=void 0;var e=require("../Components/Movable"),o=require("../Entities/Entity"),r=require("./System"),n=function(r){function n(){return r.call(this)||this}return t(n,r),n.prototype.appliesTo=function(t){return!0},n.prototype.update=function(t,r){for(var n=0,i=this.filteredEntities;n<i.length;n++){var s=i[n];if(s.hasComponent(e.Movable)){var a=s.getComponent(e.Movable);if(a.velocity.y>0)return void s.setState(o.EntityState.AIRBORNE);if(a.velocity.length())return void s.setState(o.EntityState.WALKING)}s.setState(o.EntityState.IDLING)}},n}(r.System);exports.StateSystem=n;
},{"../Components/Movable":"aAwm","../Entities/Entity":"FXSM","./System":"nSZu"}],"SeBb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.VelocitySystem=void 0;var e=require("../Components/Movable"),o=require("../Components/Physical"),i=require("../Entities/Entity"),n=require("../Util/Vector3"),r=require("./System"),c=function(i){function r(){return i.call(this)||this}return t(r,i),r.prototype.appliesTo=function(t){return t.hasComponent(o.Physical)},r.prototype.update=function(t,i){for(var r=0,c=this.filteredEntities;r<c.length;r++){var s=c[r],a=s.getComponent(o.Physical),l=0,p=0,u=0;if(s.hasComponent(e.Movable)){var v=s.getComponent(e.Movable);l+=v.velocity.x,p+=v.velocity.y,u+=v.velocity.z,0===v.velocity.x&&0===v.velocity.z||(s.direction=y(v.velocity.x,v.velocity.z))}var f=l+a.velocity.x,h=u+a.velocity.z,_=p+a.velocity.y;s.position=s.position.add(new n.Vector3(f,_,h).multiplyScalar(t))}},r}(r.System);function y(t,e){return Math.abs(t)>Math.abs(e)?t>0?i.EntityDirection.E:i.EntityDirection.W:e>0?i.EntityDirection.S:i.EntityDirection.N}exports.VelocitySystem=c;
},{"../Components/Movable":"aAwm","../Components/Physical":"dly9","../Entities/Entity":"FXSM","../Util/Vector3":"pmwY","./System":"nSZu"}],"SPXK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.HudSystem=void 0;var e=require("../Components/Stats"),n=require("../Entities/Player"),r=require("./System"),o=function(e){function r(){return e.call(this)||this}return t(r,e),r.prototype.appliesTo=function(t){return t instanceof n.Player},r.prototype.update=function(t,e){var n=this.filteredEntities[0];n&&i(n,e.ctx)},r}(r.System);function i(t,n){if(t.hasComponent(e.Stats)){var r=t.getComponent(e.Stats),o=n.canvas.width/5,i=(n.canvas.width-o)/2,s=n.canvas.height-80-20;a(n,i,s,o,20,r.health.current/r.health.max,"#D77D7D"),a(n,i,s+20+10,o,20,r.mana.current/r.mana.max,"#6C8FC0"),a(n,i,s+60,o,20,r.stamina.current/r.stamina.max,"#7F9C77")}}function a(t,e,n,r,o,i,a){t.fillStyle="#555",t.fillRect(e,n,r,o),t.fillStyle=a,t.fillRect(e,n,r*i,o)}exports.HudSystem=o;
},{"../Components/Stats":"QPvb","../Entities/Player":"RNth","./System":"nSZu"}],"yld3":[function(require,module,exports) {
module.exports="/tile_0.c1bbe6d7.png";
},{}],"k55G":[function(require,module,exports) {
module.exports="/tile_1.95829af2.png";
},{}],"aZz4":[function(require,module,exports) {
module.exports="/tile_2.21577ed4.png";
},{}],"XFvZ":[function(require,module,exports) {
module.exports="/tile_3.131fe4e8.png";
},{}],"A4ij":[function(require,module,exports) {
module.exports="/tile_4.a802cb43.png";
},{}],"ksgy":[function(require,module,exports) {
module.exports="/tile_5.cae0e103.png";
},{}],"VNva":[function(require,module,exports) {
module.exports="/tile_6.3906e637.png";
},{}],"n8Z2":[function(require,module,exports) {
module.exports="/tile_7.891e9240.png";
},{}],"YZvN":[function(require,module,exports) {
module.exports="/tile_8.aceddaf1.png";
},{}],"eZ2E":[function(require,module,exports) {
module.exports="/tile_9.79238be7.png";
},{}],"trqj":[function(require,module,exports) {
module.exports="/tile_10.89ae577f.png";
},{}],"wITB":[function(require,module,exports) {
module.exports="/tile_11.c7aa9f68.png";
},{}],"Hnj1":[function(require,module,exports) {
module.exports="/tile_12.fca272c4.png";
},{}],"jKxP":[function(require,module,exports) {
module.exports="/tile_13.a970c3e1.png";
},{}],"w1z8":[function(require,module,exports) {
module.exports="/tile_14.ebf61472.png";
},{}],"pxFb":[function(require,module,exports) {
module.exports="/tile_15.5682fedb.png";
},{}],"dJOy":[function(require,module,exports) {
module.exports="/tile_16.211e10ca.png";
},{}],"DRkF":[function(require,module,exports) {
module.exports="/tile_17.0cdb7af0.png";
},{}],"fc8n":[function(require,module,exports) {
module.exports="/tile_18.047e3d34.png";
},{}],"U3sI":[function(require,module,exports) {
module.exports="/tile_19.8d1a0231.png";
},{}],"yArF":[function(require,module,exports) {
module.exports="/tile_20.22c23f8d.png";
},{}],"QNOP":[function(require,module,exports) {
module.exports="/tile_21.57194560.png";
},{}],"mAGV":[function(require,module,exports) {
module.exports="/tile_22.8db621e5.png";
},{}],"ccWk":[function(require,module,exports) {
module.exports="/tile_23.58ace7e7.png";
},{}],"UpXt":[function(require,module,exports) {
module.exports="/tile_24.c445167f.png";
},{}],"SMbZ":[function(require,module,exports) {
module.exports="/tile_25.08f5d382.png";
},{}],"fZM4":[function(require,module,exports) {
module.exports="/tile_26.a6c1cb66.png";
},{}],"XIlJ":[function(require,module,exports) {
module.exports="/tile_27.7804e5df.png";
},{}],"oM8x":[function(require,module,exports) {
module.exports="/tile_28.52d2f461.png";
},{}],"Ntre":[function(require,module,exports) {
module.exports="/tile_29.9f475869.png";
},{}],"ZAbu":[function(require,module,exports) {
module.exports="/tile_30.8f741885.png";
},{}],"lsf9":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var s=require("./Entity"),i=require("../Game/Game"),l=t(require("../../assets/tiles/tile_0.png")),r=t(require("../../assets/tiles/tile_1.png")),u=t(require("../../assets/tiles/tile_2.png")),a=t(require("../../assets/tiles/tile_3.png")),n=t(require("../../assets/tiles/tile_4.png")),_=t(require("../../assets/tiles/tile_5.png")),p=t(require("../../assets/tiles/tile_6.png")),f=t(require("../../assets/tiles/tile_7.png")),d=t(require("../../assets/tiles/tile_8.png")),o=t(require("../../assets/tiles/tile_9.png")),g=t(require("../../assets/tiles/tile_10.png")),q=t(require("../../assets/tiles/tile_11.png")),c=t(require("../../assets/tiles/tile_12.png")),h=t(require("../../assets/tiles/tile_13.png")),m=t(require("../../assets/tiles/tile_14.png")),y=t(require("../../assets/tiles/tile_15.png")),b=t(require("../../assets/tiles/tile_16.png")),v=t(require("../../assets/tiles/tile_17.png")),I=t(require("../../assets/tiles/tile_18.png")),x=t(require("../../assets/tiles/tile_19.png")),E=t(require("../../assets/tiles/tile_20.png")),T=t(require("../../assets/tiles/tile_21.png")),w=t(require("../../assets/tiles/tile_22.png")),C=t(require("../../assets/tiles/tile_23.png")),O=t(require("../../assets/tiles/tile_24.png")),G=t(require("../../assets/tiles/tile_25.png")),H=t(require("../../assets/tiles/tile_26.png")),j=t(require("../../assets/tiles/tile_27.png")),D=t(require("../../assets/tiles/tile_28.png")),P=t(require("../../assets/tiles/tile_29.png")),W=t(require("../../assets/tiles/tile_30.png")),L=require("../Components/Collidable"),M={0:l.default,1:r.default,2:u.default,3:a.default,4:n.default,5:_.default,6:p.default,7:f.default,8:d.default,9:o.default,10:g.default,11:q.default,12:c.default,13:h.default,14:m.default,15:y.default,16:b.default,17:v.default,18:I.default,19:x.default,20:E.default,21:T.default,22:w.default,23:C.default,24:O.default,25:G.default,26:H.default,27:j.default,28:D.default,29:P.default,30:W.default},N=function(t){function s(e,s,l){var r=t.call(this)||this;return r.tileNum=e,r.position=s,r.zIndex=l,r.frameHeight=32,r.frameWidth=32,r.width=i.Game.TILE_SIZE_WIDTH,r.height=i.Game.TILE_SIZE_WIDTH,r.image.src=M[r.tileNum],r.addComponent(new L.Collidable(new L.CubeHitbox(r,1,1,.5,0))),r}return e(s,t),s}(s.Entity);exports.Tile=N;
},{"./Entity":"FXSM","../Game/Game":"juVC","../../assets/tiles/tile_0.png":"yld3","../../assets/tiles/tile_1.png":"k55G","../../assets/tiles/tile_2.png":"aZz4","../../assets/tiles/tile_3.png":"XFvZ","../../assets/tiles/tile_4.png":"A4ij","../../assets/tiles/tile_5.png":"ksgy","../../assets/tiles/tile_6.png":"VNva","../../assets/tiles/tile_7.png":"n8Z2","../../assets/tiles/tile_8.png":"YZvN","../../assets/tiles/tile_9.png":"eZ2E","../../assets/tiles/tile_10.png":"trqj","../../assets/tiles/tile_11.png":"wITB","../../assets/tiles/tile_12.png":"Hnj1","../../assets/tiles/tile_13.png":"jKxP","../../assets/tiles/tile_14.png":"w1z8","../../assets/tiles/tile_15.png":"pxFb","../../assets/tiles/tile_16.png":"dJOy","../../assets/tiles/tile_17.png":"DRkF","../../assets/tiles/tile_18.png":"fc8n","../../assets/tiles/tile_19.png":"U3sI","../../assets/tiles/tile_20.png":"yArF","../../assets/tiles/tile_21.png":"QNOP","../../assets/tiles/tile_22.png":"mAGV","../../assets/tiles/tile_23.png":"ccWk","../../assets/tiles/tile_24.png":"UpXt","../../assets/tiles/tile_25.png":"SMbZ","../../assets/tiles/tile_26.png":"fZM4","../../assets/tiles/tile_27.png":"XIlJ","../../assets/tiles/tile_28.png":"oM8x","../../assets/tiles/tile_29.png":"Ntre","../../assets/tiles/tile_30.png":"ZAbu","../Components/Collidable":"ail1"}],"E0qd":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.DebugSystem=void 0;var t=require("../Components/Drawable"),o=require("../Components/Collidable"),n=require("../Entities/Tile"),r=require("../Game/Game"),i=require("./System"),a=function(i){function a(){var e=i.call(this)||this;return e.div=document.createElement("div"),e.bufferCanvas=document.createElement("canvas"),e.bufferCtx=e.bufferCanvas.getContext("2d"),document.body.appendChild(e.div),e.div.style.cssText="\n            position: absolute;\n            top: 0;\n            right: 0;\n            background-color: rgba(0, 0, 0, 0.5);\n            padding: 10px;\n            border-radius: 5px;\n            max-width: 300px;\n            color: white;\n        ",e}return e(a,i),a.prototype.appliesTo=function(e){return e.hasComponent(t.Drawable)},a.prototype.update=function(e,t){this.bufferCanvas.height=t.ctx.canvas.clientHeight,this.bufferCanvas.width=t.ctx.canvas.clientWidth,this.bufferCtx.imageSmoothingEnabled=!1;var i=r.Game.worldPosToScreenPos(t.cameraPosition),a=i.x-this.bufferCanvas.width/2,f=i.y-this.bufferCanvas.height/2;this.bufferCtx.transform(1,0,0,1,-a,-f);for(var u=0,c=this.filteredEntities;u<c.length;u++){var p=c[u];if(p.hasComponent(o.Collidable)&&!(p instanceof n.Tile)){var d=p.getComponent(o.Collidable);d.box instanceof o.CubeHitbox&&l(d.box,this.bufferCtx)}s(r.Game.worldPosToScreenPos(p.position),""+p.position.floor().toString(),"yellow",this.bufferCtx,2)}this.div.innerHTML="\n            FPS: "+Math.floor(t.fps)+" <br/>\n            Camera position: "+t.cameraPosition.floor().toString()+"\n        ",t.ctx.drawImage(this.bufferCanvas,0,0)},a}(i.System);function s(e,t,o,n,r){void 0===r&&(r=4),n.fillStyle=o,n.fillRect(e.x-r/2,e.y-r/2,r,r),n.fillStyle=o}function l(e,t){var o=e.getCorners().map(function(e){return r.Game.worldPosToScreenPos(e)});t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(o[2].x,o[2].y),t.lineTo(o[3].x,o[3].y),t.closePath(),t.moveTo(o[4].x,o[4].y),t.lineTo(o[5].x,o[5].y),t.lineTo(o[6].x,o[6].y),t.lineTo(o[7].x,o[7].y),t.closePath();for(var n=0;n<4;n++)t.moveTo(o[n].x,o[n].y),t.lineTo(o[n+4].x,o[n+4].y);t.strokeStyle="red",t.lineWidth=1,t.stroke()}function f(e,t,o,n,r){}exports.DebugSystem=a;
},{"../Components/Drawable":"ilFe","../Components/Collidable":"ail1","../Entities/Tile":"lsf9","../Game/Game":"juVC","./System":"nSZu"}],"gVMm":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChunkSystem=void 0;var o=require("../Components/Drawable"),e=require("./System"),n=function(e){function n(){var t=e.call(this)||this;return t.lastCameraPosition=null,t}return t(n,e),n.prototype.initialize=function(t){},n.prototype.appliesTo=function(t){return!0},n.prototype.update=function(t,e){var n=e.cameraPosition.floor();if(null===this.lastCameraPosition||this.lastCameraPosition.x!==n.x||this.lastCameraPosition.z!==n.z){this.lastCameraPosition=n;for(var r=0,i=this.filteredEntities;r<i.length;r++){var a=i[r],s=a.position.distanceTo(e.cameraPosition)<11,u=a.hasComponent(o.Drawable)?a.getComponent(o.Drawable):null;s&&!u&&a.addComponent(new o.Drawable(!0)),!s&&u&&(u.fadeOut=!0,u.fadeIn=!1)}}},n}(e.System);function r(t,o,e,n,r){return Math.pow(t-e,2)+Math.pow(o-n,2)<=Math.pow(r,2)}exports.ChunkSystem=n;
},{"../Components/Drawable":"ilFe","./System":"nSZu"}],"Ygsb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhysicalCollisionSystem=void 0;var o=require("../Components/Collidable"),e=require("../Components/Physical"),i=require("./System"),n=.9,r=function(i){function n(){return i.call(this)||this}return t(n,i),n.prototype.appliesTo=function(t){return t.hasComponent(o.Collidable)&&t.hasComponent(e.Physical)},n.prototype.update=function(t,e){for(var i=0;i<this.filteredEntities.length;i++)for(var n=i+1;n<this.filteredEntities.length;n++){var r=this.filteredEntities[i],a=this.filteredEntities[n],s=(r.position.distanceTo(a.position),r.getComponent(o.Collidable).box),l=a.getComponent(o.Collidable).box;if(s instanceof o.CubeHitbox&&l instanceof o.CubeHitbox){var c=s.intersectAABB(l);c&&this.resolveAABBCollision(s,l,c)}}},n.prototype.resolveAABBCollision=function(t,o,i){t.attached.getComponent(e.Physical),o.attached.getComponent(e.Physical);var n=o.attached.position.clone().subtract(t.attached.position).normalize(),r=i.maxX-i.minX,a=i.maxY-i.minY,s=i.maxZ-i.minZ,l=Math.min(r,a,s)/2;console.log(l),t.attached.position=t.attached.position.add(n.multiplyScalar(-l)),o.attached.position=o.attached.position.add(n.multiplyScalar(l))},n}(i.System);exports.PhysicalCollisionSystem=r;
},{"../Components/Collidable":"ail1","../Components/Physical":"dly9","./System":"nSZu"}],"nDO1":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])})(o,i)};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TerrainCollisionSystem=void 0;var o=require("../Components/Collidable"),i=require("../Components/Physical"),e=require("./System"),n=.9,a=function(e){function n(){return e.call(this)||this}return t(n,e),n.prototype.appliesTo=function(t){return t.hasComponent(o.Collidable)},n.prototype.update=function(t,e){for(var n=0;n<this.filteredEntities.length;n++)for(var a=n+1;a<this.filteredEntities.length;a++){var s=this.filteredEntities[n],c=this.filteredEntities[a],r=void 0,p=void 0;if(s.hasComponent(i.Physical)&&!c.hasComponent(i.Physical))r=s,p=c;else{if(!c.hasComponent(i.Physical)||s.hasComponent(i.Physical))continue;r=c,p=s}s.position.distanceTo(c.position);var h=r.getComponent(o.Collidable).box,l=c.getComponent(o.Collidable).box;if(h instanceof o.CubeHitbox&&l instanceof o.CubeHitbox){var y=h.intersectAABB(l);y&&this.resolveStaticAABBCollision(r,p,y)}}},n.prototype.resolveStaticAABBCollision=function(t,o,e){var n=t.attached.getComponent(i.Physical),a=e.maxX-e.minX,s=e.maxY-e.minY,c=e.maxZ-e.minZ,r=Math.min(s,a,c);s===r?t.attached.position.y>o.attached.position.y?(n.velocity.y=Math.max(0,n.velocity.y),t.attached.position.y+=s):(t.attached.position.y+=-s,n.velocity.y=Math.min(0,n.velocity.y)):c===r?t.attached.position.z>o.attached.position.z?t.attached.position.z+=c/2:t.attached.position.z-=c/2:a===r&&(t.attached.position.x>o.attached.position.x?t.attached.position.x+=a/2:t.attached.position.x-=a/2)},n.prototype.resolvePhysicalAABBCollision=function(t,o,e,n){o.attached.position.distanceTo(e.attached.position);var a=o.attached.getComponent(i.Physical),s=n.maxX-n.minX,c=n.maxY-n.minY,r=n.maxZ-n.minZ,p=Math.min(c,s,r);c===p?o.attached.position.y>e.attached.position.y?(a.velocity.y=Math.max(0,a.velocity.y),o.attached.position.y+=c):(o.attached.position.y+=-c,a.velocity.y=Math.min(0,a.velocity.y)):r===p?o.attached.position.z>e.attached.position.z?o.attached.position.z+=r/2:o.attached.position.z-=r/2:s===p&&(o.attached.position.x>e.attached.position.x?o.attached.position.x+=s/2:o.attached.position.x-=s/2)},n}(e.System);exports.TerrainCollisionSystem=a;
},{"../Components/Collidable":"ail1","../Components/Physical":"dly9","./System":"nSZu"}],"juVC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var t=require("../Entities/Player"),e=require("../Entities/Enemies/Slimes/Slime"),i=require("../Event/EntityAdded"),n=require("../Event/EntityRemoved"),s=require("../Event/EventBus"),r=require("../Systems/CameraSystem"),o=require("../Systems/MovementSystem"),a=require("../Systems/DrawSystem"),h=require("../Systems/StateSystem"),m=require("../Systems/VelocitySystem"),y=require("../Systems/HudSystem"),d=require("../Systems/DebugSystem"),E=require("../Entities/Tile"),l=require("../Util/Vector3"),u=require("../Event/EntityChanged"),p=require("../Systems/CunkSystem"),S=require("../Components/Collidable"),v=require("../Systems/PhysicalCollisionSystem"),c=require("../Systems/TerrainCollisionSystem"),T=function(){function T(i,n){this.ctx=i,this.io=n,this.map=[[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,2,1,19,20,1,1,1,1,1,1,1,1,1,1,1],[1,9,8,7,3,18,1,1,1,1,1,1,1,1,1,1,1,1],[1,10,6,4,1,17,1,1,1,1,20,1,1,1,1,1,1,1],[1,11,5,1,16,30,29,28,1,1,1,1,1,1,1,1,1,1],[1,12,1,1,15,1,1,27,1,1,30,1,1,1,1,1,1,1],[1,1,1,1,14,1,1,26,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,25,1,1,1,17,1,1,1,1,1,1,1],[1,1,1,1,1,1,22,1,1,16,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,16,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,12,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]],this.fps=1/T.TIME_STEP,this.entities=[new t.Player,new e.Slime],this.systems=[new o.MovementSystem,new m.VelocitySystem,new v.PhysicalCollisionSystem,new c.TerrainCollisionSystem,new p.ChunkSystem,new h.StateSystem,new r.CameraSystem,new a.DrawSystem,new y.HudSystem,new d.DebugSystem],this.animationFrameId=null,this.running=!1,this.lastTimestamp=0,this.height=window.innerHeight,this.width=window.innerWidth,this.cameraPosition=new l.Vector3,i.canvas.width=this.width,i.canvas.height=this.height;for(var s=0;s<this.map.length;s++)for(var u=this.map[s],w=0;w<u.length;w++)for(var f=u[w],g=0;g<f.length;g++){var I=f[g];this.entities.push(new E.Tile(I,new l.Vector3(w,s,g),0))}var _=new E.Tile(10,new l.Vector3(5,.5,5),0);_.addComponent(new S.Collidable(new S.CubeHitbox(_,1,1,.5))),this.entities.push(_),window.addEventListener("click",function(t){var e=t.clientX,i=t.clientY,n=T.isoTo2D(new l.Vector3(e,i,0));console.log("World Position: "+n.floor())}),addEventListener("resize",this.onResize.bind(this))}return T.prototype.addSystem=function(t){this.systems.push(t),t.initialize(this)},T.prototype.addEntity=function(t){this.entities.push(t),T.events.emit(new i.EntityAdded(t))},T.prototype.removeEntity=function(t){var e=this.entities.indexOf(t);e>=0&&(this.entities.splice(e,1),T.events.emit(new n.EntityRemoved(t)))},T.prototype.start=function(){var t=this;if(!this.running){this.running=!0,this.animationFrameId=requestAnimationFrame(this.update.bind(this));for(var e=0,s=this.systems;e<s.length;e++)for(var r=s[e],o=0,a=this.entities.filter(r.appliesTo);o<a.length;o++){var h=a[o];r.addEntity(h)}T.events.register(n.EntityRemoved,function(e){for(var i=0,n=t.systems;i<n.length;i++){var s=n[i];s.appliesTo(e.entity)&&(s.removeEntity(e.entity),s.filteredEntitiesUpdated(t))}}),T.events.register(i.EntityAdded,function(e){for(var i=0,n=t.systems;i<n.length;i++){var s=n[i];s.appliesTo(e.entity)&&(s.addEntity(e.entity),s.filteredEntitiesUpdated(t))}}),T.events.register(u.EntityChanged,function(e){for(var i=0,n=t.systems;i<n.length;i++){var s=n[i];s.hasEntity(e.entity)&&!s.appliesTo(e.entity)&&(s.removeEntity(e.entity),s.filteredEntitiesUpdated(t)),!s.hasEntity(e.entity)&&s.appliesTo(e.entity)&&(s.addEntity(e.entity),s.filteredEntitiesUpdated(t))}})}},T.prototype.stop=function(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.fps=1/T.TIME_STEP,this.lastTimestamp=0,this.running=!1},T.prototype.update=function(t){var e;e=0===this.lastTimestamp?T.TIME_STEP:(t-this.lastTimestamp)/1e3,this.lastTimestamp=t,this.fps=T.FPS_DECAY*(1/e)+(1-T.FPS_DECAY)*this.fps;for(var i=0,n=this.systems;i<n.length;i++){n[i].update(T.TIME_STEP,this)}this.running&&(this.animationFrameId=requestAnimationFrame(this.update.bind(this)))},T.prototype.onResize=function(){this.height=window.innerHeight,this.width=window.innerWidth,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height},T.isoTo2D=function(t){return new l.Vector3((2*t.z-t.x)/2,(2*t.z+t.x)/2,0)},T.worldPosToScreenPos=function(t){return new l.Vector3(t.x*T.TILE_SIZE_WIDTH/2+t.z*T.TILE_SIZE_WIDTH/2,t.x*T.TILE_SIZE_DEPTH/2-t.z*T.TILE_SIZE_DEPTH/2-t.y*T.TILE_SIZE_DEPTH,0)},T.TIME_STEP=1/144,T.MAX_UPDATES_PER_FRAME=10,T.FPS_DECAY=.1,T.FPS_CAP=-1,T.TILE_SIZE_WIDTH=64,T.TILE_SIZE_DEPTH=32,T.TILE_OFFSET=16,T.events=new s.EventBus,T}();exports.Game=T;
},{"../Entities/Player":"RNth","../Entities/Enemies/Slimes/Slime":"FOzE","../Event/EntityAdded":"wPL4","../Event/EntityRemoved":"SbuM","../Event/EventBus":"d1VX","../Systems/CameraSystem":"XcbI","../Systems/MovementSystem":"Jhdx","../Systems/DrawSystem":"Kog2","../Systems/StateSystem":"IPEb","../Systems/VelocitySystem":"SeBb","../Systems/HudSystem":"SPXK","../Systems/DebugSystem":"E0qd","../Entities/Tile":"lsf9","../Util/Vector3":"pmwY","../Event/EntityChanged":"Wjc8","../Systems/CunkSystem":"gVMm","../Components/Collidable":"ail1","../Systems/PhysicalCollisionSystem":"Ygsb","../Systems/TerrainCollisionSystem":"nDO1"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./index.scss");var e=require("./src/Game/Game"),t=document.getElementById("canvas"),r=t.getContext("2d"),s=new e.Game(r,"");s.start();
},{"./index.scss":"eHzx","./src/Game/Game":"juVC"}]},{},["QCba"], null)
//# sourceMappingURL=/client.e4a1aa9c.js.map