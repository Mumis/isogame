parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eHzx":[function(require,module,exports) {

},{}],"Wjc8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityChanged=void 0;var t=function(){return function(t){this.entity=t}}();exports.EntityChanged=t;
},{}],"pmwY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector3=void 0;var t=function(){function t(t,i,r){void 0===t&&(t=0),void 0===i&&(i=0),void 0===r&&(r=0),this.x=t,this.y=i,this.z=r}return t.prototype.floor=function(){return new t(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y,this.z+i.z)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y,this.z-i.z)},t.prototype.multiplyScalar=function(i){return new t(this.x*i,this.y*i,this.z*i)},t.prototype.divideScalar=function(i){if(0===i)throw new Error("Division by zero");return new t(this.x/i,this.y/i,this.z/i)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.prototype.normalize=function(){var i=this.length();return 0===i?new t(0,0,0):this.divideScalar(i)},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.prototype.cross=function(i){return new t(this.y*i.z-this.z*i.y,this.z*i.x-this.x*i.z,this.x*i.y-this.y*i.x)},t.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2))},t.prototype.distanceSquared=function(t){return Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2)},t.prototype.lerp=function(t,i){return this.add(t.subtract(this).multiplyScalar(i))},t.prototype.clone=function(){return new t(this.x,this.y,this.z)},t.prototype.equals=function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},t.prototype.toString=function(){return"Vector3("+this.x+", "+this.y+", "+this.z+")"},t.zero=function(){return new t(0,0,0)},t.unitX=function(){return new t(1,0,0)},t.unitY=function(){return new t(0,1,0)},t.unitZ=function(){return new t(0,0,1)},t}();exports.Vector3=t;
},{}],"FXSM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Entity=exports.EntityDirection=exports.EntityState=void 0;var t,e,i=require("../Event/EntityChanged"),n=require("../Game/Game"),o=require("../Util/Vector3");!function(t){t[t.IDLING=0]="IDLING",t[t.WALKING=1]="WALKING",t[t.ATTACKING=2]="ATTACKING",t[t.DYING=3]="DYING",t[t.AIRBORNE=4]="AIRBORNE"}(t=exports.EntityState||(exports.EntityState={})),function(t){t[t.N=0]="N",t[t.E=1]="E",t[t.S=2]="S",t[t.W=3]="W"}(e=exports.EntityDirection||(exports.EntityDirection={}));var s=function(){function s(){this.components=[],this.step=0,this.timeElapsed=0,this.position=new o.Vector3(0,0,0),this.zIndex=0,this.direction=e.S,this.state=t.IDLING,this.frameHeight=16,this.frameWidth=16,this.width=16,this.height=16,this.image=new Image,this.spirteSheetMap=[],this.castShadow=!1}return s.prototype.getComponent=function(t){for(var e=0,i=this.components;e<i.length;e++){var n=i[e];if(n instanceof t)return n}throw new Error("Failed to get component type "+t+". Please run hasComponent first!")},s.prototype.removeComponent=function(t){var e=this.components.indexOf(t);e>=0&&(this.components.splice(e,1),n.Game.events.emit(new i.EntityChanged(this)))},s.prototype.addComponent=function(t){this.components.push(t),n.Game.events.emit(new i.EntityChanged(this))},s.prototype.addComponents=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o=0,s=t;o<s.length;o++){var r=s[o];this.addComponent(r)}n.Game.events.emit(new i.EntityChanged(this))},s.prototype.hasComponent=function(t){for(var e=0,i=this.components;e<i.length;e++){if(i[e]instanceof t)return!0}return!1},s.prototype.hasComponents=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];if(!this.hasComponent(n))return!1}return!0},s.prototype.setState=function(t){this.state=t,this.state!==t&&(this.step=0,this.timeElapsed=0)},s.prototype.draw=function(t,e,i){var n,o,s,r,h=this,a=t.worldPosToScreenPos(this.position),p=this.width,d=this.height;t.ctx.imageSmoothingEnabled=!1;var m=this.spirteSheetMap.find(function(t){return t.state===h.state&&t.direction===h.direction}),c=null!==(n=null==m?void 0:m.xIndex)&&void 0!==n?n:0,l=null!==(o=null==m?void 0:m.yIndex)&&void 0!==o?o:0,u=null!==(s=null==m?void 0:m.steps)&&void 0!==s?s:0,f=null!==(r=null==m?void 0:m.speed)&&void 0!==r?r:0,v=(c+this.step)*this.frameWidth,g=l*this.frameHeight;t.ctx.save(),t.ctx.globalAlpha=i,t.ctx.drawImage(this.image,v,g,this.frameWidth,this.frameHeight,a.x-this.width/2,a.y-this.height/2,p,d),t.ctx.restore(),this.timeElapsed+=e;var y=f/u;this.timeElapsed>=y&&(this.step++,this.timeElapsed=0),this.step>=u&&(this.step=c)},s}();exports.Entity=s;
},{"../Event/EntityChanged":"Wjc8","../Game/Game":"juVC","../Util/Vector3":"pmwY"}],"c4tB":[function(require,module,exports) {
module.exports="slime-blue.b7f71d7c.png";
},{}],"jFDH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Component=void 0;var e=function(){return function(){}}();exports.Component=e;
},{}],"dly9":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Physical=void 0;var o=require("../Util/Vector3"),e=require("./Component"),r=function(e){function r(t,r,n){void 0===t&&(t=new o.Vector3(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=1);var i=e.call(this)||this;return i.velocity=t,i.acceleration=r,i.mass=n,i}return t(r,e),r}(e.Component);exports.Physical=r;
},{"../Util/Vector3":"pmwY","./Component":"jFDH"}],"aAwm":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Movable=void 0;var o=require("../Util/Vector3"),e=require("./Component"),r=function(e){function r(t,r,n){void 0===t&&(t=new o.Vector3(0,0,0)),void 0===r&&(r=!1);var i=e.call(this)||this;return i.velocity=t,i.patrolling=r,i.patrollingSettings=n,i.patrollingTo=null,i}return t(r,e),r}(e.Component);exports.Movable=r;
},{"../Util/Vector3":"pmwY","./Component":"jFDH"}],"QPvb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Stats=void 0;var e=require("./Component"),r=function(e){function r(t,r,n,o){void 0===t&&(t={max:100,current:100,regen:1}),void 0===r&&(r={max:100,current:100,regen:1}),void 0===n&&(n={max:100,current:100,regen:1}),void 0===o&&(o={max:100,current:100,regen:1});var i=e.call(this)||this;return i.health=t,i.mana=r,i.stamina=n,i.speed=o,i}return t(r,e),r}(e.Component);exports.Stats=r;
},{"./Component":"jFDH"}],"ail1":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(i,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])})(i,n)};return function(i,n){function o(){this.constructor=i}t(i,n),i.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Collidable=exports.SphereHitbox=exports.CubeHitbox=void 0;var i=require("../Util/Vector3"),n=require("./Component"),o=function(){function t(t,i,n,o,e,r,a){void 0===e&&(e=0),void 0===r&&(r=0),void 0===a&&(a=0),this.attached=t,this.width=i,this.depth=n,this.height=o,this.offsetX=e,this.offsetY=r,this.offsetZ=a}return t.prototype.getBoundingBox=function(){return{minX:this.attached.position.x+this.offsetX-this.width/2,maxX:this.attached.position.x+this.offsetX+this.width/2,minY:this.attached.position.y+this.offsetY-this.height,maxY:this.attached.position.y+this.offsetY,minZ:this.attached.position.z+this.offsetZ-this.depth/2,maxZ:this.attached.position.z+this.offsetZ+this.depth/2}},t.prototype.getCorners=function(){var t=this.getBoundingBox(),n=t.minX,o=t.maxX,e=t.minY,r=t.maxY,a=t.minZ,s=t.maxZ;return[new i.Vector3(n,e,a),new i.Vector3(o,e,a),new i.Vector3(o,e,s),new i.Vector3(n,e,s),new i.Vector3(n,r,a),new i.Vector3(o,r,a),new i.Vector3(o,r,s),new i.Vector3(n,r,s)]},t.prototype.intersectAABB=function(t){var i=this.getBoundingBox(),n=t.getBoundingBox(),o=Math.max(i.minX,n.minX),e=Math.min(i.maxX,n.maxX),r=Math.max(i.minY,n.minY),a=Math.min(i.maxY,n.maxY),s=Math.max(i.minZ,n.minZ),h=Math.min(i.maxZ,n.maxZ);return o<e&&r<a&&s<h?{minX:o,maxX:e,minY:r,maxY:a,minZ:s,maxZ:h}:null},t.prototype.overlapAABB=function(t){var n=this.getBoundingBox(),o=t.getBoundingBox(),e=Math.min(n.maxX-o.minX,o.maxX-n.minX),r=Math.min(n.maxY-o.minY,o.maxY-n.minY),a=Math.min(n.maxZ-o.minZ,o.maxZ-o.minZ);return new i.Vector3(e,r,a)},t}();exports.CubeHitbox=o;var e=function(){return function(t,i){this.radius=t}}();exports.SphereHitbox=e;var r=function(i){function n(t){var n=i.call(this)||this;return n.box=t,n}return t(n,i),n}(n.Component);exports.Collidable=r;
},{"../Util/Vector3":"pmwY","./Component":"jFDH"}],"niFg":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Abilities=void 0;var e=require("./Component"),o=function(e){function o(t,o,r){void 0===o&&(o=[]),void 0===r&&(r=8);var n=e.call(this)||this;return n.caster=t,n.activeSet=o,n.maxAmount=r,n}return t(o,e),o.prototype.castAbility=function(t,e){this.activeSet[t].cast(this.caster,e)},o}(e.Component);exports.Abilities=o;
},{"./Component":"jFDH"}],"DC4y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ability=void 0;var t=function(){function t(){this.cooldown=1,this.timeUntilReady=0,this.lastTimestamp=null,this.image=new Image}return t.prototype.updateCooldown=function(){var t=this;this.timeUntilReady=this.cooldown;var e=function(i){null===t.lastTimestamp&&(t.lastTimestamp=i);var o=(i-t.lastTimestamp)/1e3;t.lastTimestamp=i,t.timeUntilReady-=o,console.log(t.timeUntilReady),t.timeUntilReady>0?requestAnimationFrame(e):t.timeUntilReady=0};requestAnimationFrame(e)},t.prototype.cast=function(t,e){0===this.timeUntilReady&&(this.lastTimestamp=null,this.onCast(t,e),this.updateCooldown())},t.prototype.NPCBehavior=function(){},t.prototype.onCast=function(t,e){throw new Error("Not implemented")},t}();exports.Ability=t;
},{}],"MDEw":[function(require,module,exports) {
module.exports="dash.b3499e6c.png";
},{}],"yQ4i":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Dash=void 0;var r=require("./Ability"),o=e(require("../../../assets/skills/dash.png"));exports.Dash=o.default;var n=require("../Physical"),i=require("../../Util/Vector3"),s=function(e){function r(){var t=e.call(this)||this;return t.cooldown=4,t.image.src=o.default,t}return t(r,e),r.prototype.onCast=function(t,e){if(t.hasComponent(n.Physical)){var r=t.getComponent(n.Physical);r.velocity=r.velocity.multiplyScalar(2).add(new i.Vector3(0,20,0))}},r}(r.Ability);exports.Dash=s;
},{"./Ability":"DC4y","../../../assets/skills/dash.png":"MDEw","../Physical":"dly9","../../Util/Vector3":"pmwY"}],"Q0cP":[function(require,module,exports) {
module.exports="Slash.5fc68c2c.png";
},{}],"tSQS":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Slash=void 0;var r=require("./Ability"),o=e(require("../../../assets/skills/Slash.png"));exports.Slash=o.default;var n=function(e){function r(){var t=e.call(this)||this;return t.image.src=o.default,t}return t(r,e),r.prototype.onCast=function(t,e){},r}(r.Ability);exports.Slash=n;
},{"./Ability":"DC4y","../../../assets/skills/Slash.png":"Q0cP"}],"RNth":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var n=require("./Entity"),i=e(require("./Enemies/Slimes/slime-blue.png")),r=require("../Components/Physical"),o=require("../Components/Movable"),s=require("../Components/Stats"),a=require("../Components/Collidable"),d=require("../Util/Vector3"),p=require("../Components/Abilities"),c=require("../Components/ability/Dash"),y=require("../Components/ability/Slash"),u=function(e){function u(){var t=e.call(this)||this;return t.frameHeight=32,t.frameWidth=32,t.width=32,t.height=32,t.position=new d.Vector3(3,3,3),t.castShadow=!0,t.addComponents(new p.Abilities(t,[new y.Slash,new c.Dash]),new s.Stats,new r.Physical,new a.Collidable(new a.CubeHitbox(t,.33,.33,.5,0,0,0)),new o.Movable),t.image.src=i.default,t.spirteSheetMap=[{state:n.EntityState.WALKING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.IDLING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:1}],t}return t(u,e),u}(n.Entity);exports.Player=u;
},{"./Entity":"FXSM","./Enemies/Slimes/slime-blue.png":"c4tB","../Components/Physical":"dly9","../Components/Movable":"aAwm","../Components/Stats":"QPvb","../Components/Collidable":"ail1","../Util/Vector3":"pmwY","../Components/Abilities":"niFg","../Components/ability/Dash":"yQ4i","../Components/ability/Slash":"tSQS"}],"NldY":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function o(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Character=void 0;var r=require("./Component"),e=function(r){function e(t){var e=r.call(this)||this;return e.name=t,e}return t(e,r),e}(r.Component);exports.Character=e;
},{"./Component":"jFDH"}],"FOzE":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Slime=void 0;var n=require("../../Entity"),i=e(require("./slime-blue.png")),r=require("../../../Components/Physical"),o=require("../../../Components/Movable"),s=require("../../../Components/Stats"),a=require("../../../Components/Collidable"),d=require("../../../Util/Vector3"),c=require("../../../Components/Character"),p=function(e){function p(t,p){void 0===t&&(t=new d.Vector3(3,3,3)),void 0===p&&(p=32);var y=e.call(this)||this;return y.position=t,y.frameHeight=32,y.frameWidth=32,y.width=32,y.height=32,y.castShadow=!0,y.width=p,y.height=p,y.addComponents(new c.Character("Slime"),new s.Stats,new r.Physical,new a.Collidable(new a.CubeHitbox(y,p/100,p/100,p/100,0,0,0)),new o.Movable),y.image.src=i.default,y.spirteSheetMap=[{state:n.EntityState.WALKING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.WALKING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:0},{state:n.EntityState.IDLING,direction:n.EntityDirection.S,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.E,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.W,speed:.8,steps:6,xIndex:0,yIndex:1},{state:n.EntityState.IDLING,direction:n.EntityDirection.N,speed:.8,steps:6,xIndex:0,yIndex:1}],y}return t(p,e),p}(n.Entity);exports.Slime=p;
},{"../../Entity":"FXSM","./slime-blue.png":"c4tB","../../../Components/Physical":"dly9","../../../Components/Movable":"aAwm","../../../Components/Stats":"QPvb","../../../Components/Collidable":"ail1","../../../Util/Vector3":"pmwY","../../../Components/Character":"NldY"}],"wPL4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityAdded=void 0;var t=function(){return function(t){this.entity=t}}();exports.EntityAdded=t;
},{}],"SbuM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EntityRemoved=void 0;var e=function(){return function(e){this.entity=e}}();exports.EntityRemoved=e;
},{}],"d1VX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventBus=void 0;var t=function(){function t(){this.events=new Map}return t.prototype.register=function(t,e){var s=this.events.get(t);s?s.push(e):this.events.set(t,[e])},t.prototype.emit=function(t){var e=this.events.get(t.constructor);if(e)for(var s=0,n=e;s<n.length;s++){(0,n[s])(t)}},t}();exports.EventBus=t;
},{}],"nSZu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.System=void 0;var t=function(){function t(){this.filteredEntities=[]}return t.prototype.addEntity=function(t){this.filteredEntities.push(t)},t.prototype.removeEntity=function(t){var e=this.filteredEntities.indexOf(t);this.filteredEntities.splice(e,1)},t.prototype.hasEntity=function(t){return this.filteredEntities.includes(t)},t.prototype.appliesTo=function(t){return!1},t.prototype.initialize=function(t){},t.prototype.filteredEntitiesUpdated=function(t){},t.prototype.update=function(t,e){throw new Error("Not implemented")},t}();exports.System=t;
},{}],"XcbI":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function r(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraSystem=void 0;var o=require("../Entities/Player"),e=require("./System"),r=function(e){function r(){var t=e.call(this)||this;return t.targetPosition=null,t}return t(r,e),r.prototype.appliesTo=function(t){return t instanceof o.Player},r.prototype.update=function(t,o){for(var e=0,r=this.filteredEntities;e<r.length;e++){var i=r[e];if(!this.targetPosition)return o.cameraPosition=i.position,void(this.targetPosition=o.cameraPosition);this.targetPosition=i.position,o.cameraPosition=i.position}},r}(e.System);function i(t,o,e){return t+(o-t)*e}exports.CameraSystem=r;
},{"../Entities/Player":"RNth","./System":"nSZu"}],"ilFe":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Drawable=void 0;var e=require("./Component"),o=function(e){function o(t){void 0===t&&(t=!1);var o=e.call(this)||this;return o.fadeIn=t,o.opacity=1,o.fadeInElapsed=0,o.fadeOut=!1,o.fadeOutElapsed=0,o.fadeDuration=.1,t&&(o.opacity=0),o}return t(o,e),o}(e.Component);exports.Drawable=o;
},{"./Component":"jFDH"}],"Kog2":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),e=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var a=arguments[e],i=0,c=a.length;i<c;i++,o++)r[o]=a[i];return r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.DrawSystem=void 0;var n=require("../Components/Drawable"),r=require("./System"),o=function(r){function o(){return r.call(this)||this}return t(o,r),o.prototype.appliesTo=function(t){return t.hasComponent(n.Drawable)},o.prototype.update=function(t,r){r.ctx.imageSmoothingEnabled=!1,r.ctx.clearRect(0,0,r.ctx.canvas.clientWidth,r.ctx.canvas.clientHeight);for(var o=0,c=e(this.filteredEntities).sort(function(t,e){var n=t.position,r=e.position;return t.zIndex!==e.zIndex?t.zIndex-e.zIndex:r.z!==n.z?r.z-n.z:n.y!==r.y?n.y-r.y:n.x-r.x});o<c.length;o++){var u=c[o],p=u.getComponent(n.Drawable);p.fadeIn&&a(p,t),p.fadeOut&&i(p,t),p.opacity<=0&&u.removeComponent(p),u.draw(r,t,p.opacity)}},o}(r.System);function a(t,e){t.fadeInElapsed+=e,t.opacity=u(t.fadeInElapsed,0,1,t.fadeDuration),t.opacity>=1&&(t.opacity=1,t.fadeInElapsed=t.fadeDuration,t.fadeIn=!1)}function i(t,e){t.fadeOutElapsed+=e,t.opacity=1-u(t.fadeOutElapsed,0,1,t.fadeDuration),t.opacity<=0&&(t.opacity=0,t.fadeOutElapsed=t.fadeDuration,t.fadeOut=!1)}function c(t,e,n,r){return n*t/r+e}function u(t,e,n,r){return n*(t/=r)*t+e}function p(t,e,n,r){return-n*(t/=r)*(t-2)+e}exports.DrawSystem=o;
},{"../Components/Drawable":"ilFe","./System":"nSZu"}],"IPEb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.StateSystem=void 0;var e=require("../Components/Movable"),o=require("../Entities/Entity"),r=require("./System"),n=function(r){function n(){return r.call(this)||this}return t(n,r),n.prototype.appliesTo=function(t){return!0},n.prototype.update=function(t,r){for(var n=0,i=this.filteredEntities;n<i.length;n++){var s=i[n];if(s.hasComponent(e.Movable)){var a=s.getComponent(e.Movable);if(a.velocity.y>0)return void s.setState(o.EntityState.AIRBORNE);if(a.velocity.length())return void s.setState(o.EntityState.WALKING)}s.setState(o.EntityState.IDLING)}},n}(r.System);exports.StateSystem=n;
},{"../Components/Movable":"aAwm","../Entities/Entity":"FXSM","./System":"nSZu"}],"SeBb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.VelocitySystem=void 0;var e=require("../Components/Movable"),i=require("../Components/Physical"),o=require("../Entities/Entity"),n=require("../Entities/Player"),r=require("../Util/Vector3"),c=require("./System"),s=function(o){function c(){return o.call(this)||this}return t(c,o),c.prototype.appliesTo=function(t){return t.hasComponent(i.Physical)},c.prototype.update=function(t,o){this.filteredEntities.find(function(t){return t instanceof n.Player});for(var c=0,s=this.filteredEntities;c<s.length;c++){var a=s[c],l=a.getComponent(i.Physical),u=0,p=0,v=0;if(a.hasComponent(e.Movable)){var f=a.getComponent(e.Movable);u+=f.velocity.x,p+=f.velocity.y,v+=f.velocity.z,0===f.velocity.x&&0===f.velocity.z||(a.direction=y(f.velocity.x,f.velocity.z))}var h=u+l.velocity.x,_=v+l.velocity.z,d=p+l.velocity.y;a.position=a.position.add(new r.Vector3(h,d,_).multiplyScalar(t))}},c}(c.System);function y(t,e){return Math.abs(t)>Math.abs(e)?t>0?o.EntityDirection.E:o.EntityDirection.W:e>0?o.EntityDirection.S:o.EntityDirection.N}exports.VelocitySystem=s;
},{"../Components/Movable":"aAwm","../Components/Physical":"dly9","../Entities/Entity":"FXSM","../Entities/Player":"RNth","../Util/Vector3":"pmwY","./System":"nSZu"}],"SPXK":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.HudSystem=void 0;var e=require("../Components/Abilities"),n=require("../Components/Character"),r=require("../Components/Drawable"),a=require("../Components/Stats"),i=require("../Entities/Player"),o=require("./System"),c=function(e){function o(){var t=e.call(this)||this;return t.bufferCanvas=document.createElement("canvas"),t.bufferCtx=t.bufferCanvas.getContext("2d"),t}return t(o,e),o.prototype.appliesTo=function(t){return t.hasComponent(r.Drawable)&&(t.hasComponent(a.Stats)||t.hasComponent(n.Character))},o.prototype.update=function(t,e){var n=this.filteredEntities.find(function(t){return t instanceof i.Player}),r=this.filteredEntities.filter(function(t){return!(t instanceof i.Player)});n&&l(n,e),f(r,e)},o}(o.System);function f(t,e){for(var r=0,i=t;r<i.length;r++){var o=i[r],c=e.worldPosToScreenPos(o.position);if(o.hasComponent(n.Character)){var f=o.getComponent(n.Character),l=e.ctx.measureText(f.name).width,s=c.x-l/2,u=c.y-20;e.ctx.font="15px Montserrat",e.ctx.fillStyle="#fff",e.ctx.lineWidth=2,e.ctx.strokeText(f.name,s,u),e.ctx.fillText(f.name,s,u)}if(o.hasComponent(a.Stats)){var x=o.getComponent(a.Stats);if(x.health.current===x.health.max)continue;l=40,s=c.x-l/2,u=c.y-15;e.ctx.fillStyle="#000",e.ctx.fillRect(s-1,u-1,l+2,5),e.ctx.fillStyle="#ff0000",e.ctx.fillRect(s,u,l*(x.health.current/x.health.max),3)}}}function l(t,n){if(t.hasComponent(a.Stats)){var r=t.getComponent(a.Stats),i=n.ctx.canvas.width/5,o=3*(m=20)+2*(x=10),c=(n.ctx.canvas.width-i)/2,f=n.ctx.canvas.height-o-84;s(n.ctx,c,f,i,m,r.health.current/r.health.max,"#ff0000"),s(n.ctx,c,f+m+x,i,m,r.mana.current/r.mana.max,"#0000ff"),s(n.ctx,c,f+2*(m+x),i,m,r.stamina.current/r.stamina.max,"#00ff00")}if(t.hasComponent(e.Abilities))for(var l=t.getComponent(e.Abilities),u=0;u<l.maxAmount;u++){var x,h=l.activeSet[u],m=64,p=8*((i=64)+(x=10));n.ctx.fillStyle="#555";var y=(n.ctx.canvas.width-p)/2+u*(i+x),v=n.ctx.canvas.height-m-x;if(n.ctx.fillRect(y,v,i,m),h&&(n.ctx.drawImage(h.image,y,v,i,m),h.timeUntilReady>0)){n.ctx.font="20px Montserrat";var d=y+i/2-n.ctx.measureText(Math.ceil(h.timeUntilReady).toString()).width/2,C=v+m/2;n.ctx.fillStyle="#fff",n.ctx.fillText(Math.ceil(h.timeUntilReady).toString(),d,C)}}}function s(t,e,n,r,a,i,o){t.fillStyle="#555",t.fillRect(e,n,r,a),t.fillStyle=o,t.fillRect(e,n,r*i,a)}exports.HudSystem=c;
},{"../Components/Abilities":"niFg","../Components/Character":"NldY","../Components/Drawable":"ilFe","../Components/Stats":"QPvb","../Entities/Player":"RNth","./System":"nSZu"}],"yld3":[function(require,module,exports) {
module.exports="tile_0.c1bbe6d7.png";
},{}],"k55G":[function(require,module,exports) {
module.exports="tile_1.95829af2.png";
},{}],"aZz4":[function(require,module,exports) {
module.exports="tile_2.21577ed4.png";
},{}],"XFvZ":[function(require,module,exports) {
module.exports="tile_3.131fe4e8.png";
},{}],"A4ij":[function(require,module,exports) {
module.exports="tile_4.a802cb43.png";
},{}],"ksgy":[function(require,module,exports) {
module.exports="tile_5.cae0e103.png";
},{}],"VNva":[function(require,module,exports) {
module.exports="tile_6.3906e637.png";
},{}],"n8Z2":[function(require,module,exports) {
module.exports="tile_7.891e9240.png";
},{}],"YZvN":[function(require,module,exports) {
module.exports="tile_8.aceddaf1.png";
},{}],"eZ2E":[function(require,module,exports) {
module.exports="tile_9.79238be7.png";
},{}],"trqj":[function(require,module,exports) {
module.exports="tile_10.89ae577f.png";
},{}],"wITB":[function(require,module,exports) {
module.exports="tile_11.c7aa9f68.png";
},{}],"Hnj1":[function(require,module,exports) {
module.exports="tile_12.fca272c4.png";
},{}],"jKxP":[function(require,module,exports) {
module.exports="tile_13.a970c3e1.png";
},{}],"w1z8":[function(require,module,exports) {
module.exports="tile_14.ebf61472.png";
},{}],"pxFb":[function(require,module,exports) {
module.exports="tile_15.5682fedb.png";
},{}],"dJOy":[function(require,module,exports) {
module.exports="tile_16.211e10ca.png";
},{}],"DRkF":[function(require,module,exports) {
module.exports="tile_17.0cdb7af0.png";
},{}],"fc8n":[function(require,module,exports) {
module.exports="tile_18.047e3d34.png";
},{}],"U3sI":[function(require,module,exports) {
module.exports="tile_19.8d1a0231.png";
},{}],"yArF":[function(require,module,exports) {
module.exports="tile_20.22c23f8d.png";
},{}],"QNOP":[function(require,module,exports) {
module.exports="tile_21.57194560.png";
},{}],"mAGV":[function(require,module,exports) {
module.exports="tile_22.8db621e5.png";
},{}],"ccWk":[function(require,module,exports) {
module.exports="tile_23.58ace7e7.png";
},{}],"UpXt":[function(require,module,exports) {
module.exports="tile_24.c445167f.png";
},{}],"SMbZ":[function(require,module,exports) {
module.exports="tile_25.08f5d382.png";
},{}],"fZM4":[function(require,module,exports) {
module.exports="tile_26.a6c1cb66.png";
},{}],"XIlJ":[function(require,module,exports) {
module.exports="tile_27.7804e5df.png";
},{}],"oM8x":[function(require,module,exports) {
module.exports="tile_28.52d2f461.png";
},{}],"Ntre":[function(require,module,exports) {
module.exports="tile_29.9f475869.png";
},{}],"ZAbu":[function(require,module,exports) {
module.exports="tile_30.8f741885.png";
},{}],"lsf9":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,s){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)t.hasOwnProperty(s)&&(e[s]=t[s])})(t,s)};return function(t,s){function i(){this.constructor=t}e(t,s),t.prototype=null===s?Object.create(s):(i.prototype=s.prototype,new i)}}(),t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var s=require("./Entity"),i=require("../Game/Game"),l=t(require("../../assets/tiles/tile_0.png")),r=t(require("../../assets/tiles/tile_1.png")),u=t(require("../../assets/tiles/tile_2.png")),a=t(require("../../assets/tiles/tile_3.png")),n=t(require("../../assets/tiles/tile_4.png")),_=t(require("../../assets/tiles/tile_5.png")),p=t(require("../../assets/tiles/tile_6.png")),f=t(require("../../assets/tiles/tile_7.png")),d=t(require("../../assets/tiles/tile_8.png")),o=t(require("../../assets/tiles/tile_9.png")),g=t(require("../../assets/tiles/tile_10.png")),q=t(require("../../assets/tiles/tile_11.png")),c=t(require("../../assets/tiles/tile_12.png")),h=t(require("../../assets/tiles/tile_13.png")),m=t(require("../../assets/tiles/tile_14.png")),y=t(require("../../assets/tiles/tile_15.png")),b=t(require("../../assets/tiles/tile_16.png")),v=t(require("../../assets/tiles/tile_17.png")),I=t(require("../../assets/tiles/tile_18.png")),x=t(require("../../assets/tiles/tile_19.png")),E=t(require("../../assets/tiles/tile_20.png")),T=t(require("../../assets/tiles/tile_21.png")),w=t(require("../../assets/tiles/tile_22.png")),C=t(require("../../assets/tiles/tile_23.png")),O=t(require("../../assets/tiles/tile_24.png")),G=t(require("../../assets/tiles/tile_25.png")),H=t(require("../../assets/tiles/tile_26.png")),j=t(require("../../assets/tiles/tile_27.png")),D=t(require("../../assets/tiles/tile_28.png")),P=t(require("../../assets/tiles/tile_29.png")),W=t(require("../../assets/tiles/tile_30.png")),L=require("../Components/Collidable"),M={0:l.default,1:r.default,2:u.default,3:a.default,4:n.default,5:_.default,6:p.default,7:f.default,8:d.default,9:o.default,10:g.default,11:q.default,12:c.default,13:h.default,14:m.default,15:y.default,16:b.default,17:v.default,18:I.default,19:x.default,20:E.default,21:T.default,22:w.default,23:C.default,24:O.default,25:G.default,26:H.default,27:j.default,28:D.default,29:P.default,30:W.default},N=function(t){function s(e,s,l){var r=t.call(this)||this;return r.tileNum=e,r.position=s,r.zIndex=l,r.frameHeight=32,r.frameWidth=32,r.width=i.Game.TILE_SIZE_WIDTH,r.height=i.Game.TILE_SIZE_WIDTH,r.image.src=M[r.tileNum],r.addComponent(new L.Collidable(new L.CubeHitbox(r,1,1,.5,0))),r}return e(s,t),s}(s.Entity);exports.Tile=N;
},{"./Entity":"FXSM","../Game/Game":"juVC","../../assets/tiles/tile_0.png":"yld3","../../assets/tiles/tile_1.png":"k55G","../../assets/tiles/tile_2.png":"aZz4","../../assets/tiles/tile_3.png":"XFvZ","../../assets/tiles/tile_4.png":"A4ij","../../assets/tiles/tile_5.png":"ksgy","../../assets/tiles/tile_6.png":"VNva","../../assets/tiles/tile_7.png":"n8Z2","../../assets/tiles/tile_8.png":"YZvN","../../assets/tiles/tile_9.png":"eZ2E","../../assets/tiles/tile_10.png":"trqj","../../assets/tiles/tile_11.png":"wITB","../../assets/tiles/tile_12.png":"Hnj1","../../assets/tiles/tile_13.png":"jKxP","../../assets/tiles/tile_14.png":"w1z8","../../assets/tiles/tile_15.png":"pxFb","../../assets/tiles/tile_16.png":"dJOy","../../assets/tiles/tile_17.png":"DRkF","../../assets/tiles/tile_18.png":"fc8n","../../assets/tiles/tile_19.png":"U3sI","../../assets/tiles/tile_20.png":"yArF","../../assets/tiles/tile_21.png":"QNOP","../../assets/tiles/tile_22.png":"mAGV","../../assets/tiles/tile_23.png":"ccWk","../../assets/tiles/tile_24.png":"UpXt","../../assets/tiles/tile_25.png":"SMbZ","../../assets/tiles/tile_26.png":"fZM4","../../assets/tiles/tile_27.png":"XIlJ","../../assets/tiles/tile_28.png":"oM8x","../../assets/tiles/tile_29.png":"Ntre","../../assets/tiles/tile_30.png":"ZAbu","../Components/Collidable":"ail1"}],"gVMm":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function n(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ChunkSystem=void 0;var o=require("../Components/Drawable"),e=require("./System"),n=function(e){function n(){var t=e.call(this)||this;return t.lastCameraPosition=null,t}return t(n,e),n.prototype.initialize=function(t){},n.prototype.appliesTo=function(t){return!0},n.prototype.update=function(t,e){var n=e.cameraPosition.floor();if(null===this.lastCameraPosition||this.lastCameraPosition.x!==n.x||this.lastCameraPosition.z!==n.z){this.lastCameraPosition=n;for(var r=0,i=this.filteredEntities;r<i.length;r++){var a=i[r],s=a.position.distanceTo(e.cameraPosition)<11,u=a.hasComponent(o.Drawable)?a.getComponent(o.Drawable):null;s&&!u&&a.addComponent(new o.Drawable(!0)),!s&&u&&(u.fadeOut=!0,u.fadeIn=!1)}}},n}(e.System);function r(t,o,e,n,r){return Math.pow(t-e,2)+Math.pow(o-n,2)<=Math.pow(r,2)}exports.ChunkSystem=n;
},{"../Components/Drawable":"ilFe","./System":"nSZu"}],"Ygsb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)o.hasOwnProperty(e)&&(t[e]=o[e])})(o,e)};return function(o,e){function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhysicalCollisionSystem=void 0;var o=require("../Components/Collidable"),e=require("../Components/Physical"),i=require("./System"),n=.9,r=function(i){function n(){return i.call(this)||this}return t(n,i),n.prototype.appliesTo=function(t){return t.hasComponent(o.Collidable)&&t.hasComponent(e.Physical)},n.prototype.update=function(t,e){for(var i=0;i<this.filteredEntities.length;i++)for(var n=i+1;n<this.filteredEntities.length;n++){var r=this.filteredEntities[i],a=this.filteredEntities[n],s=(r.position.distanceTo(a.position),r.getComponent(o.Collidable).box),l=a.getComponent(o.Collidable).box;if(s instanceof o.CubeHitbox&&l instanceof o.CubeHitbox){var c=s.intersectAABB(l);c&&this.resolveAABBCollision(s,l,c)}}},n.prototype.resolveAABBCollision=function(t,o,i){t.attached.getComponent(e.Physical),o.attached.getComponent(e.Physical);var n=o.attached.position.clone().subtract(t.attached.position).normalize(),r=i.maxX-i.minX,a=i.maxY-i.minY,s=i.maxZ-i.minZ,l=Math.min(r,a,s)/2;t.attached.position=t.attached.position.add(n.multiplyScalar(-l)),o.attached.position=o.attached.position.add(n.multiplyScalar(l))},n}(i.System);exports.PhysicalCollisionSystem=r;
},{"../Components/Collidable":"ail1","../Components/Physical":"dly9","./System":"nSZu"}],"nXIr":[function(require,module,exports) {
module.exports={moveUp:"KeyW",moveDown:"KeyS",moveLeft:"KeyA",moveRight:"KeyD",jump:"Space",sprint:"ShiftLeft",skill1:"mouseLeft",skill2:"mouseRight",skill3:"Digit3",skill4:"Digit4",skill5:"Digit5",skill6:"Digit6",skill7:"Digit7",skill8:"Digit8"};
},{}],"IaXM":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(o,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var n in o)o.hasOwnProperty(n)&&(t[n]=o[n])})(o,n)};return function(o,n){function s(){this.constructor=o}t(o,n),o.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ControlsSystem=void 0;var o=require("../Components/Abilities"),n=require("../Components/Movable"),s=require("../Components/Physical"),e=require("../Components/Stats"),i=require("../Entities/Player"),l=require("../Game/Game"),r=require("../Util/Vector3"),a=require("./System"),u=function(a){function u(){return a.call(this)||this}return t(u,a),u.prototype.appliesTo=function(t){return t instanceof i.Player},u.prototype.update=function(t,i){for(var a=0,u=this.filteredEntities;a<u.length;a++){var c=u[a],p=c.hasComponent(n.Movable)?c.getComponent(n.Movable):null,h=c.hasComponent(s.Physical)?c.getComponent(s.Physical):null,m=c.hasComponent(e.Stats)?c.getComponent(e.Stats):null,y=c.hasComponent(o.Abilities)?c.getComponent(o.Abilities):null,v=m?m.speed.current:1,f=0,b=0,_=0,C=1;i.inputs.has(i.controls.moveUp)&&(_+=1,b-=1),i.inputs.has(i.controls.moveDown)&&(_-=1,b+=1),i.inputs.has(i.controls.moveLeft)&&(b-=1,_-=1),i.inputs.has(i.controls.moveRight)&&(b+=1,_+=1),i.inputs.has(i.controls.jump)&&0===(null==h?void 0:h.velocity.y)&&(f+=1),(i.inputs.has(i.controls.moveUp)||i.inputs.has(i.controls.moveDown)||i.inputs.has(i.controls.moveLeft)||i.inputs.has(i.controls.moveRight))&&i.inputs.has(i.controls.sprint)&&m&&(null==m?void 0:m.stamina.current)>0&&(C=2.2,m.stamina.current-=1),p&&(p.velocity=new r.Vector3(b/l.Game.TILE_SIZE_WIDTH*v*C,0,_/l.Game.TILE_SIZE_WIDTH*v*C)),h&&(h.velocity=h.velocity.add(new r.Vector3(0,16*f,0))),i.inputs.has(i.controls.skill1)&&(null==y||y.castAbility(0,i)),i.inputs.has(i.controls.skill2)&&(null==y||y.castAbility(1,i)),i.inputs.has(i.controls.skill3)&&(null==y||y.castAbility(2,i)),i.inputs.has(i.controls.skill4)&&(null==y||y.castAbility(3,i)),i.inputs.has(i.controls.skill5)&&(null==y||y.castAbility(4,i)),i.inputs.has(i.controls.skill6)&&(null==y||y.castAbility(5,i)),i.inputs.has(i.controls.skill7)&&(null==y||y.castAbility(6,i)),i.inputs.has(i.controls.skill8)&&(null==y||y.castAbility(7,i))}},u}(a.System);exports.ControlsSystem=u;
},{"../Components/Abilities":"niFg","../Components/Movable":"aAwm","../Components/Physical":"dly9","../Components/Stats":"QPvb","../Entities/Player":"RNth","../Game/Game":"juVC","../Util/Vector3":"pmwY","./System":"nSZu"}],"juVC":[function(require,module,exports) {
"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Game=void 0;var e=require("../Entities/Player"),i=require("../Entities/Enemies/Slimes/Slime"),n=require("../Event/EntityAdded"),s=require("../Event/EntityRemoved"),o=require("../Event/EventBus"),r=require("../Systems/CameraSystem"),a=require("../Systems/DrawSystem"),h=require("../Systems/StateSystem"),d=require("../Systems/VelocitySystem"),u=require("../Systems/HudSystem"),m=require("../Entities/Tile"),y=require("../Util/Vector3"),p=require("../Event/EntityChanged"),E=require("../Systems/CunkSystem"),l=require("../Components/Collidable"),c=require("../Systems/PhysicalCollisionSystem"),v=t(require("./controls.json")),T=require("../Systems/ControlsSystem"),S=function(){function t(n,s){this.ctx=n,this.io=s,this.controls=v.default,this.map=[[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,2,1,19,20,1,1,1,1,1,1,1,1,1,1,1],[1,9,8,7,3,18,1,1,1,1,1,1,1,1,1,1,1,1],[1,10,6,4,1,17,1,1,1,1,20,1,1,1,1,1,1,1],[1,11,5,1,16,30,29,28,1,1,1,1,1,1,1,1,1,1],[1,12,1,1,15,1,1,27,1,1,30,1,1,1,1,1,1,1],[1,1,1,1,14,1,1,26,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,25,1,1,1,17,1,1,1,1,1,1,1],[1,1,1,1,1,1,22,1,1,16,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,16,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,12,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]]],this.fps=1/t.TIME_STEP,this.entities=[new e.Player,new i.Slime],this.systems=[new T.ControlsSystem,new d.VelocitySystem,new c.PhysicalCollisionSystem,new E.ChunkSystem,new h.StateSystem,new r.CameraSystem,new a.DrawSystem,new u.HudSystem],this.animationFrameId=null,this.running=!1,this.lastTimestamp=0,this.height=window.innerHeight,this.width=window.innerWidth,this.cameraPosition=new y.Vector3,this.inputs=new Set,this.mouseWorldPos=new y.Vector3,n.canvas.width=this.width,n.canvas.height=this.height;for(var o=0;o<this.map.length;o++)for(var p=this.map[o],S=0;S<p.length;S++)for(var w=p[S],f=0;f<w.length;f++){var I=w[f];this.entities.push(new m.Tile(I,new y.Vector3(S,o,f),0))}var _=new m.Tile(10,new y.Vector3(5,.5,5),0);_.addComponent(new l.Collidable(new l.CubeHitbox(_,1,1,.5))),this.entities.push(_);for(var g=0;g<400;g++)this.entities.push(new i.Slime(new y.Vector3(40*Math.random(),3,40*Math.random()),32+64*Math.random()));addEventListener("keydown",this.onKeyDown.bind(this)),addEventListener("keyup",this.onKeyUp.bind(this)),addEventListener("mousedown",this.onMouseDown.bind(this)),addEventListener("mouseup",this.onMouseUp.bind(this)),addEventListener("mousemove",this.onMouseMove.bind(this)),addEventListener("resize",this.onResize.bind(this)),addEventListener("contextmenu",function(t){t.preventDefault()})}return t.prototype.onMouseMove=function(t){console.log(t)},t.prototype.onMouseDown=function(t){0===t.button&&this.inputs.add("mouseLeft"),2===t.button&&this.inputs.add("mouseRight")},t.prototype.onMouseUp=function(t){0===t.button&&this.inputs.delete("mouseLeft"),2===t.button&&this.inputs.delete("mouseRight")},t.prototype.onKeyDown=function(t){console,this.inputs.add(t.code)},t.prototype.onKeyUp=function(t){this.inputs.delete(t.code)},t.prototype.addSystem=function(t){this.systems.push(t),t.initialize(this)},t.prototype.addEntity=function(e){this.entities.push(e),t.events.emit(new n.EntityAdded(e))},t.prototype.removeEntity=function(e){var i=this.entities.indexOf(e);i>=0&&(this.entities.splice(i,1),t.events.emit(new s.EntityRemoved(e)))},t.prototype.start=function(){var e=this;if(!this.running){this.running=!0,this.animationFrameId=requestAnimationFrame(this.update.bind(this));for(var i=0,o=this.systems;i<o.length;i++)for(var r=o[i],a=0,h=this.entities.filter(r.appliesTo);a<h.length;a++){var d=h[a];r.addEntity(d)}t.events.register(s.EntityRemoved,function(t){for(var i=0,n=e.systems;i<n.length;i++){var s=n[i];s.appliesTo(t.entity)&&(s.removeEntity(t.entity),s.filteredEntitiesUpdated(e))}}),t.events.register(n.EntityAdded,function(t){for(var i=0,n=e.systems;i<n.length;i++){var s=n[i];s.appliesTo(t.entity)&&(s.addEntity(t.entity),s.filteredEntitiesUpdated(e))}}),t.events.register(p.EntityChanged,function(t){for(var i=0,n=e.systems;i<n.length;i++){var s=n[i];s.hasEntity(t.entity)&&!s.appliesTo(t.entity)&&(s.removeEntity(t.entity),s.filteredEntitiesUpdated(e)),!s.hasEntity(t.entity)&&s.appliesTo(t.entity)&&(s.addEntity(t.entity),s.filteredEntitiesUpdated(e))}})}},t.prototype.stop=function(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.fps=1/t.TIME_STEP,this.lastTimestamp=0,this.running=!1},t.prototype.update=function(e){var i;i=0===this.lastTimestamp?t.TIME_STEP:(e-this.lastTimestamp)/1e3,this.lastTimestamp=e,this.fps=t.FPS_DECAY*(1/i)+(1-t.FPS_DECAY)*this.fps;for(var n=0,s=this.systems;n<s.length;n++){s[n].update(t.TIME_STEP,this)}this.running&&(this.animationFrameId=requestAnimationFrame(this.update.bind(this)))},t.prototype.onResize=function(){this.height=window.innerHeight,this.width=window.innerWidth,this.ctx.canvas.width=this.width,this.ctx.canvas.height=this.height},t.prototype.isoToThreeD=function(e){var i=(e.x/(t.TILE_SIZE_WIDTH/2)+e.y/(t.TILE_SIZE_DEPTH/2))/2,n=(e.x/(t.TILE_SIZE_WIDTH/2)-e.y/(t.TILE_SIZE_DEPTH/2))/2,s=-(e.y+i*t.TILE_SIZE_DEPTH/2-n*t.TILE_SIZE_DEPTH/2)/t.TILE_SIZE_DEPTH;return new y.Vector3(i,s,n)},t.prototype.threeDtoIso=function(e){var i=e.x*t.TILE_SIZE_WIDTH/2+e.z*t.TILE_SIZE_WIDTH/2,n=e.x*t.TILE_SIZE_DEPTH/2-e.z*t.TILE_SIZE_DEPTH/2-e.y*t.TILE_SIZE_DEPTH;return new y.Vector3(i,n,0)},t.prototype.worldPosToScreenPos=function(t){var e=this.threeDtoIso(this.cameraPosition),i=e.x-this.ctx.canvas.width/2,n=e.y-this.ctx.canvas.height/2;return this.threeDtoIso(t).subtract(new y.Vector3(i,n,0))},t.prototype.screenPosToWorldPos=function(t){var e=this.threeDtoIso(this.cameraPosition),i=e.x-this.ctx.canvas.width/2,n=e.y-this.ctx.canvas.height/2;return this.threeDtoIso(t).add(new y.Vector3(i,n,0))},t.TIME_STEP=1/144,t.FPS_DECAY=.1,t.TILE_SIZE_WIDTH=64,t.TILE_SIZE_DEPTH=32,t.TILE_OFFSET=16,t.events=new o.EventBus,t}();exports.Game=S;
},{"../Entities/Player":"RNth","../Entities/Enemies/Slimes/Slime":"FOzE","../Event/EntityAdded":"wPL4","../Event/EntityRemoved":"SbuM","../Event/EventBus":"d1VX","../Systems/CameraSystem":"XcbI","../Systems/DrawSystem":"Kog2","../Systems/StateSystem":"IPEb","../Systems/VelocitySystem":"SeBb","../Systems/HudSystem":"SPXK","../Entities/Tile":"lsf9","../Util/Vector3":"pmwY","../Event/EntityChanged":"Wjc8","../Systems/CunkSystem":"gVMm","../Components/Collidable":"ail1","../Systems/PhysicalCollisionSystem":"Ygsb","./controls.json":"nXIr","../Systems/ControlsSystem":"IaXM"}],"QCba":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("./index.scss");var e=require("./src/Game/Game"),t=document.getElementById("canvas"),r=t.getContext("2d"),s=new e.Game(r,"");s.start();
},{"./index.scss":"eHzx","./src/Game/Game":"juVC"}]},{},["QCba"], null)